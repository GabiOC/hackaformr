<script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' type='text/javascript'></script>

<% if current_admin %>
  <div class="col-md-4">
    <h1><u>Hackathon</u></h1>
    <h3><%= @hackathon.name %></h3>
    <li>Start Date: <%= @hackathon.start_date %></li>
    <li>End Date: <%= @hackathon.end_date %></li>
    <li>Location: <%= @hackathon.location %></li>
    <li>Organizer: <%= @hackathon.admin.email %></li>
    <li>Description: <%= @hackathon.description %></li><br>
  </div>

  <div class="col-md-4">
    <h2>Current Participants</h2>
    <% @hackathon.users.each do |user| %>
      Email: <%= user.email %><br>
      Skills: <% user.skills.each do |skill| %>
        <%= skill.name %>
      <% end %><br>
    <% end %>
  </div>

<div style='width: 800px;'>
  <div id="map" style='width: 800px; height: 400px;'></div>
</div>
<script type="text/javascript">
handler = Gmaps.build('Google');
handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
  markers = handler.addMarkers([
    {
      "lat": 0,
      "lng": 0,
      "picture": {
        "url": "https://addons.cdn.mozilla.net/img/uploads/addon_icons/13/13028-64.png",
        "width":  36,
        "height": 36
      },
      "infowindow": "hello!"
    }
  ]);
  handler.bounds.extendWith(markers);
  handler.fitMapToBounds();
});
</script>

  <div class="col-md-4">
  <% if @hackathon.teams == [] %>
    <h2>Ready to create teams?</h2>
    <%= form_tag(teams_create_path, method: "post") do %>
      <%= hidden_field_tag :hackathon_id, @hackathon.id %>
      <%= submit_tag "Create Team", class: "btn btn-primary"%>
    <% end %>
  <% else %>
    <h2> You've created teams! </h2>
    <%= button_to "See the Teams", hackathon_teams_path(@hackathon.id), class: "btn btn-primary" %>
  <% end %>
  </div>

<% elsif current_user %>

<div class="col-md-4">
  <h1><u>Hackathon</u></h1>
  <h3><%= @hackathon.name %></h3>
  <ul>
    <li>Start Date: <%= @hackathon.start_date %></li>
    <li>End Date: <%= @hackathon.end_date %></li>
    <li>Location: <%= @hackathon.location %></li>
    <li>Organizer: <%= @hackathon.admin.email %></li>
    <li>Description: <%= @hackathon.description %></li>
  </ul>
</div>

<div class="col-md-4">
  <% if @hackathon.users.include? current_user %>
    <% if @hackathon.teams == [] %>
      <h3>You're currently signed up for this hackathon and you'll be assigned a team soon.<h3>
      Don't want to participate in this hackathon anymore?
      <%= form_tag(users_remove_hackathon_path, method: "post") do %>
        <%= hidden_field_tag :hackathon_id, @hackathon.id %>
        <%= submit_tag "Remove Myself from Hackathon", class: "btn btn-primary"%>
      <% end %>
    <% else %>
      You've been assigned to a team!
      <%= button_to "See the Teams", hackathon_teams_path(@hackathon.id), class: "btn btn-primary"%>
    <% end %>
  <% else %>
    <h3>You're not currently signed up for this hackathon. Want to participate?</h3>
    <%= form_tag(users_add_hackathon_path, method: "post") do %>
      <%= hidden_field_tag :hackathon_id, @hackathon.id %>
      <%= submit_tag "Sign Up for Hackathon", class: "btn btn-primary"%>
    <% end %>
  <% end %>
</div>

<% end %>
